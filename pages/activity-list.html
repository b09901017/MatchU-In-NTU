<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#003060">
    <title>MatchU - 活動廣場</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>💖</text></svg>">

    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/components.css">

    <link rel="stylesheet" href="../css/pages/activity-list.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

</head>
<body>
    <div class="activity-list-page page-with-nav">
        <div class="top-nav">
            <div class="top-nav-left">
                <div class="top-nav-title">活動廣場</div>
            </div>
            <div class="top-nav-right">
                <button class="btn-icon" onclick="window.location.href='activity-map.html'" title="地圖視圖">
                    <span>🗺️</span>
                </button>
                <button class="btn-icon" onclick="Utils.showToast('搜尋功能開發中', 'info')">
                    <span>🔍</span>
                </button>
            </div>
        </div>

        <!-- Activity Header -->
        <div class="activity-header">
            <h1>探索台大周邊活動</h1>
            <div class="activity-stats">
                <div class="activity-stat-item">
                    <div class="activity-stat-number" id="activeActivities">12</div>
                    <div class="activity-stat-label">進行中</div>
                </div>
                <div class="activity-stat-item">
                    <div class="activity-stat-number" id="myActivities">3</div>
                    <div class="activity-stat-label">我參加的</div>
                </div>
                <div class="activity-stat-item">
                    <div class="activity-stat-number" id="totalParticipants">48</div>
                    <div class="activity-stat-label">總參與人數</div>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <div class="filter-chip active" data-filter="all" onclick="filterActivities('all')">全部</div>
            <div class="filter-chip" data-filter="coffee" onclick="filterActivities('coffee')">☕ 喝咖啡</div>
            <div class="filter-chip" data-filter="movie" onclick="filterActivities('movie')">🎬 看電影</div>
            <div class="filter-chip" data-filter="study" onclick="filterActivities('study')">📚 一起讀書</div>
            <div class="filter-chip" data-filter="food" onclick="filterActivities('food')">🍽️ 吃美食</div>
            <div class="filter-chip" data-filter="sport" onclick="filterActivities('sport')">⚽ 運動</div>
            <div class="filter-chip" data-filter="exhibition" onclick="filterActivities('exhibition')">🎨 看展覽</div>
            <div class="filter-chip" data-filter="game" onclick="filterActivities('game')">🎮 打遊戲</div>
            <div class="filter-chip" data-filter="walk" onclick="filterActivities('walk')">🌳 散步</div>
        </div>

        <!-- Activity List -->
        <div class="activity-list-container" id="activityList">
            <!-- Activities will be dynamically inserted here -->
        </div>

        <!-- Create Activity Button -->
        <button class="create-activity-btn" onclick="openCreateActivityModal()" title="發起新活動">
            +
        </button>

        <div class="bottom-nav">
            <div class="nav-item" onclick="window.location.href='swipe.html'">
                <div class="nav-icon">🎴</div>
                <div>盲盒</div>
            </div>
            <div class="nav-item" onclick="window.location.href='chat-list.html'">
                <div class="nav-icon">💬</div>
                <div>聊天</div>
            </div>
            <div class="nav-item active" onclick="window.location.href='activity-list.html'">
                <div class="nav-icon">🎉</div>
                <div>活動</div>
            </div>
            <div class="nav-item" onclick="window.location.href='profile.html'">
                <div class="nav-icon">👤</div>
                <div>我的</div>
            </div>
        </div>
    </div>

    <!-- Create Activity Modal -->
    <div class="modal" id="createActivityModal">
        <div class="modal-content">
            <div class="modal-header">發起新活動</div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">活動類型</label>
                    <div class="activity-type-selector">
                        <div class="activity-type-option" data-type="coffee" data-emoji="☕" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">☕</div>
                            <div class="activity-type-option-label">喝咖啡</div>
                        </div>
                        <div class="activity-type-option" data-type="movie" data-emoji="🎬" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">🎬</div>
                            <div class="activity-type-option-label">看電影</div>
                        </div>
                        <div class="activity-type-option" data-type="study" data-emoji="📚" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">📚</div>
                            <div class="activity-type-option-label">一起讀書</div>
                        </div>
                        <div class="activity-type-option" data-type="food" data-emoji="🍽️" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">🍽️</div>
                            <div class="activity-type-option-label">吃美食</div>
                        </div>
                        <div class="activity-type-option" data-type="sport" data-emoji="⚽" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">⚽</div>
                            <div class="activity-type-option-label">運動</div>
                        </div>
                        <div class="activity-type-option" data-type="exhibition" data-emoji="🎨" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">🎨</div>
                            <div class="activity-type-option-label">看展覽</div>
                        </div>
                        <div class="activity-type-option" data-type="game" data-emoji="🎮" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">🎮</div>
                            <div class="activity-type-option-label">打遊戲</div>
                        </div>
                        <div class="activity-type-option" data-type="walk" data-emoji="🌳" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">🌳</div>
                            <div class="activity-type-option-label">散步</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">活動標題</label>
                    <input type="text" class="form-input" id="activityTitle" placeholder="例如: 週五下午一起喝咖啡聊天">
                </div>

                <div class="form-group">
                    <label class="form-label">活動時間</label>
                    <input type="datetime-local" class="form-input" id="activityTime">
                </div>

                <div class="form-group">
                    <label class="form-label">活動地點</label>
                    <input type="text" class="form-input" id="activityLocation" placeholder="例如: 舟山路咖啡廳">
                </div>

                <div class="form-group">
                    <label class="form-label">人數限制</label>
                    <div class="participant-limit-input">
                        <button class="participant-limit-btn" onclick="adjustParticipantLimit(-1)">-</button>
                        <div class="participant-limit-value" id="participantLimit">4</div>
                        <button class="participant-limit-btn" onclick="adjustParticipantLimit(1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">活動說明 (選填)</label>
                    <textarea class="form-textarea" id="activityDescription" placeholder="描述活動的更多細節..."></textarea>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary flex-1" onclick="closeModal('createActivityModal')">取消</button>
                <button class="btn btn-primary flex-1" onclick="createActivity()">發起活動</button>
            </div>
        </div>
    </div>

    <!-- Activity Detail Page -->
    <div class="activity-detail-page" id="activityDetailPage">
        <div class="top-nav">
            <div class="top-nav-left">
                <button class="btn-icon" onclick="closeActivityDetail()">
                    <span>←</span>
                </button>
                <div class="top-nav-title">活動詳情</div>
            </div>
            <div class="top-nav-right">
                <button class="btn-icon" onclick="Utils.showToast('分享功能開發中', 'info')">
                    <span>📤</span>
                </button>
            </div>
        </div>

        <div class="activity-detail-hero">
            <div class="activity-detail-emoji" id="detailEmoji">☕</div>
            <div class="activity-detail-title" id="detailTitle">一起喝咖啡</div>
            <div class="activity-status recruiting" id="detailStatus">招募中</div>
        </div>

        <div class="activity-detail-content">
            <div class="activity-detail-section">
                <div class="activity-detail-section-title">活動資訊</div>
                <div class="activity-details" id="detailInfo">
                    <!-- Will be filled dynamically -->
                </div>
            </div>

            <div class="activity-detail-section">
                <div class="activity-detail-section-title">活動說明</div>
                <p id="detailDescription" style="color: var(--text-secondary); line-height: 1.6;">
                    <!-- Will be filled dynamically -->
                </p>
            </div>

            <div class="activity-detail-section">
                <div class="activity-detail-section-title">主辦人</div>
                <div class="activity-organizer" id="detailOrganizer">
                    <!-- Will be filled dynamically -->
                </div>
            </div>

            <div class="activity-detail-section">
                <div class="activity-detail-section-title">參與者</div>
                <div id="detailParticipants">
                    <!-- Will be filled dynamically -->
                </div>
            </div>
        </div>

        <button class="btn btn-primary btn-block join-activity-btn" id="joinBtn" onclick="joinActivity()">
            參加活動
        </button>
    </div>

    <script src="../js/config.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/components.js"></script>
    <script src="../js/pages/activity-list.js"></script>

</body>
</html>
