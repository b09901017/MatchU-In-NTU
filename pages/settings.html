<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#003060">
    <title>MatchU - 設定</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>💖</text></svg>">

    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/components.css">

    <link rel="stylesheet" href="../css/pages/settings.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

        <div class="top-nav">
            <div class="top-nav-left">
                <button class="btn-icon" onclick="window.history.back()">
                    <span>←</span>
                </button>
                <div class="top-nav-title">設定</div>
            </div>
        </div>

        <!-- Account Settings -->
        <div class="settings-section">
            <div class="settings-group-title">帳號設定</div>
            <div class="settings-item" onclick="openEmailModal()">
                <div class="settings-item-left">
                    <div class="settings-item-icon">📧</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">電子郵件</div>
                        <div class="settings-item-description" id="currentEmail">b12345678@ntu.edu.tw</div>
                    </div>
                </div>
                <div class="settings-item-arrow">→</div>
            </div>
            <div class="settings-item" onclick="openPasswordModal()">
                <div class="settings-item-left">
                    <div class="settings-item-icon">🔒</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">更改密碼</div>
                    </div>
                </div>
                <div class="settings-item-arrow">→</div>
            </div>
        </div>

        <!-- Privacy Settings -->
        <div class="settings-section">
            <div class="settings-group-title">隱私設定</div>
            <div class="settings-item" onclick="toggleSetting('profileVisibility', this)">
                <div class="settings-item-left">
                    <div class="settings-item-icon">👁️</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">顯示個人檔案</div>
                        <div class="settings-item-description">讓其他人看見你的個人檔案</div>
                    </div>
                </div>
                <div class="toggle-switch active" data-setting="profileVisibility"></div>
            </div>
            <div class="settings-item" onclick="toggleSetting('onlineStatus', this)">
                <div class="settings-item-left">
                    <div class="settings-item-icon">🟢</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">顯示上線狀態</div>
                        <div class="settings-item-description">讓配對對象看見你是否在線上</div>
                    </div>
                </div>
                <div class="toggle-switch active" data-setting="onlineStatus"></div>
            </div>
            <div class="settings-item" onclick="toggleSetting('readReceipts', this)">
                <div class="settings-item-left">
                    <div class="settings-item-icon">✓✓</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">已讀回條</div>
                        <div class="settings-item-description">讓對方知道你已讀訊息</div>
                    </div>
                </div>
                <div class="toggle-switch active" data-setting="readReceipts"></div>
            </div>
        </div>

        <!-- Notification Settings -->
        <div class="settings-section">
            <div class="settings-group-title">通知設定</div>
            <div class="settings-item" onclick="toggleSetting('matchNotifications', this)">
                <div class="settings-item-left">
                    <div class="settings-item-icon">💖</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">配對通知</div>
                        <div class="settings-item-description">當配對成功時通知你</div>
                    </div>
                </div>
                <div class="toggle-switch active" data-setting="matchNotifications"></div>
            </div>
            <div class="settings-item" onclick="toggleSetting('messageNotifications', this)">
                <div class="settings-item-left">
                    <div class="settings-item-icon">💬</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">訊息通知</div>
                        <div class="settings-item-description">當收到新訊息時通知你</div>
                    </div>
                </div>
                <div class="toggle-switch active" data-setting="messageNotifications"></div>
            </div>
            <div class="settings-item" onclick="toggleSetting('activityNotifications', this)">
                <div class="settings-item-left">
                    <div class="settings-item-icon">🎉</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">活動邀約通知</div>
                        <div class="settings-item-description">當有活動邀約時通知你</div>
                    </div>
                </div>
                <div class="toggle-switch active" data-setting="activityNotifications"></div>
            </div>
        </div>

        <!-- Matching Preferences -->
        <div class="settings-section">
            <div class="settings-group-title">配對偏好</div>
            <div class="settings-item" onclick="openGenderPreferenceModal()">
                <div class="settings-item-left">
                    <div class="settings-item-icon">⚧️</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">性別偏好</div>
                    </div>
                </div>
                <div class="settings-item-value" id="genderPreference">全部</div>
                <div class="settings-item-arrow">→</div>
            </div>
            <div class="settings-item" onclick="openAgeRangeModal()">
                <div class="settings-item-left">
                    <div class="settings-item-icon">🎂</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">年齡範圍</div>
                    </div>
                </div>
                <div class="settings-item-value" id="ageRange">18 - 30 歲</div>
                <div class="settings-item-arrow">→</div>
            </div>
            <div class="settings-item" onclick="openDistanceModal()">
                <div class="settings-item-left">
                    <div class="settings-item-icon">📍</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">活動距離範圍</div>
                        <div class="settings-item-description">搜尋活動的最大距離</div>
                    </div>
                </div>
                <div class="settings-item-value" id="distance">5 公里</div>
                <div class="settings-item-arrow">→</div>
            </div>
        </div>

        <!-- Other Settings -->
        <div class="settings-section">
            <div class="settings-group-title">其他</div>
            <div class="settings-item" onclick="Utils.showToast('功能開發中', 'info')">
                <div class="settings-item-left">
                    <div class="settings-item-icon">🚫</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">封鎖名單</div>
                    </div>
                </div>
                <div class="settings-item-arrow">→</div>
            </div>
            <div class="settings-item" onclick="Utils.showToast('功能開發中', 'info')">
                <div class="settings-item-left">
                    <div class="settings-item-icon">❓</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">幫助與支援</div>
                    </div>
                </div>
                <div class="settings-item-arrow">→</div>
            </div>
            <div class="settings-item" onclick="Utils.showToast('功能開發中', 'info')">
                <div class="settings-item-left">
                    <div class="settings-item-icon">📄</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">服務條款</div>
                    </div>
                </div>
                <div class="settings-item-arrow">→</div>
            </div>
            <div class="settings-item" onclick="Utils.showToast('功能開發中', 'info')">
                <div class="settings-item-left">
                    <div class="settings-item-icon">🔐</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">隱私政策</div>
                    </div>
                </div>
                <div class="settings-item-arrow">→</div>
            </div>
            <div class="settings-item" onclick="Utils.showToast('功能開發中', 'info')">
                <div class="settings-item-left">
                    <div class="settings-item-icon">ℹ️</div>
                    <div class="settings-item-content">
                        <div class="settings-item-label">關於 MatchU</div>
                        <div class="settings-item-description">版本 1.0.0</div>
                    </div>
                </div>
                <div class="settings-item-arrow">→</div>
            </div>
        </div>

        <!-- Danger Zone -->
        <div class="danger-zone">
            <div class="danger-zone-title">危險區域</div>
            <button class="btn btn-block delete-account-btn" onclick="confirmDeleteAccount()">
                刪除帳號
            </button>
        </div>
    </div>

    <!-- Email Modal -->
    <div class="modal" id="emailModal">
        <div class="modal-content">
            <div class="modal-header">更改電子郵件</div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">新的 NTU 電子郵件</label>
                    <input type="email" class="form-input" id="newEmail" placeholder="b12345678@ntu.edu.tw">
                </div>
                <div class="form-group">
                    <label class="form-label">確認密碼</label>
                    <input type="password" class="form-input" id="confirmPassword" placeholder="輸入密碼以確認變更">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary flex-1" onclick="closeModal('emailModal')">取消</button>
                <button class="btn btn-primary flex-1" onclick="updateEmail()">確認</button>
            </div>
        </div>
    </div>

    <!-- Password Modal -->
    <div class="modal" id="passwordModal">
        <div class="modal-content">
            <div class="modal-header">更改密碼</div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">目前密碼</label>
                    <input type="password" class="form-input" id="currentPassword" placeholder="輸入目前密碼">
                </div>
                <div class="form-group">
                    <label class="form-label">新密碼</label>
                    <input type="password" class="form-input" id="newPassword" placeholder="至少 8 個字元">
                </div>
                <div class="form-group">
                    <label class="form-label">確認新密碼</label>
                    <input type="password" class="form-input" id="confirmNewPassword" placeholder="再次輸入新密碼">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary flex-1" onclick="closeModal('passwordModal')">取消</button>
                <button class="btn btn-primary flex-1" onclick="updatePassword()">確認</button>
            </div>
        </div>
    </div>

    <!-- Gender Preference Modal -->
    <div class="modal" id="genderPreferenceModal">
        <div class="modal-content">
            <div class="modal-header">性別偏好</div>
            <div class="modal-body">
                <div class="preference-option selected" data-value="all">
                    <input type="radio" name="gender" value="all" checked>
                    <label>全部</label>
                </div>
                <div class="preference-option" data-value="male">
                    <input type="radio" name="gender" value="male">
                    <label>男性</label>
                </div>
                <div class="preference-option" data-value="female">
                    <input type="radio" name="gender" value="female">
                    <label>女性</label>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary flex-1" onclick="closeModal('genderPreferenceModal')">取消</button>
                <button class="btn btn-primary flex-1" onclick="updateGenderPreference()">確認</button>
            </div>
        </div>
    </div>

    <!-- Age Range Modal -->
    <div class="modal" id="ageRangeModal">
        <div class="modal-content">
            <div class="modal-header">年齡範圍</div>
            <div class="modal-body">
                <div class="range-slider-container">
                    <div class="range-slider-label">
                        <span>最小年齡</span>
                        <span id="minAgeValue">18</span>
                    </div>
                    <input type="range" class="range-slider" id="minAge" min="18" max="50" value="18" oninput="updateAgeRange()">
                </div>
                <div class="range-slider-container">
                    <div class="range-slider-label">
                        <span>最大年齡</span>
                        <span id="maxAgeValue">30</span>
                    </div>
                    <input type="range" class="range-slider" id="maxAge" min="18" max="50" value="30" oninput="updateAgeRange()">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary flex-1" onclick="closeModal('ageRangeModal')">取消</button>
                <button class="btn btn-primary flex-1" onclick="saveAgeRange()">確認</button>
            </div>
        </div>
    </div>

    <!-- Distance Modal -->
    <div class="modal" id="distanceModal">
        <div class="modal-content">
            <div class="modal-header">活動距離範圍</div>
            <div class="modal-body">
                <div class="range-slider-container">
                    <div class="range-slider-label">
                        <span>最大距離</span>
                        <span id="distanceValue">5 公里</span>
                    </div>
                    <input type="range" class="range-slider" id="distanceSlider" min="1" max="20" value="5" oninput="updateDistanceValue()">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary flex-1" onclick="closeModal('distanceModal')">取消</button>
                <button class="btn btn-primary flex-1" onclick="saveDistance()">確認</button>
            </div>
        </div>
    </div>

    <script src="../js/config.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/components.js"></script>
    <script src="../js/pages/settings.js"></script>

</body>
</html>
