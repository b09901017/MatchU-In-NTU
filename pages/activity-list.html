<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#003060">
    <title>MatchU - æ´»å‹•å»£å ´</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’–</text></svg>">

    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/components.css">

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        .activity-list-page {
            background: var(--bg-secondary);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .activity-header {
            background: var(--gradient-primary);
            padding: var(--space-lg) var(--space-md);
            color: white;
        }

        .activity-stats {
            display: flex;
            gap: var(--space-lg);
            margin-top: var(--space-md);
        }

        .activity-stat-item {
            flex: 1;
            text-align: center;
        }

        .activity-stat-number {
            font-size: var(--font-h2);
            font-weight: var(--weight-bold);
        }

        .activity-stat-label {
            font-size: var(--font-body-sm);
            opacity: 0.9;
            margin-top: var(--space-xs);
        }

        .filter-section {
            background: white;
            padding: var(--space-md);
            display: flex;
            gap: var(--space-sm);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .filter-section::-webkit-scrollbar {
            display: none;
        }

        .filter-chip {
            padding: var(--space-xs) var(--space-md);
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-full);
            white-space: nowrap;
            cursor: pointer;
            transition: all var(--transition-base);
            font-size: var(--font-body-sm);
        }

        .filter-chip:hover {
            border-color: var(--primary-blue);
        }

        .filter-chip.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .activity-list-container {
            padding: var(--space-md);
        }

        .activity-card {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-md);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .activity-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .activity-card:active {
            transform: scale(0.98);
        }

        .activity-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-md);
        }

        .activity-type {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: var(--font-h3);
            font-weight: var(--weight-semibold);
        }

        .activity-type-emoji {
            font-size: 24px;
        }

        .activity-status {
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-body-sm);
            font-weight: var(--weight-semibold);
        }

        .activity-status.recruiting {
            background: var(--success-bg);
            color: var(--success);
        }

        .activity-status.full {
            background: var(--bg-tertiary);
            color: var(--text-tertiary);
        }

        .activity-status.closed {
            background: var(--error-bg);
            color: var(--error);
        }

        .activity-details {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .activity-detail-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-body-sm);
            color: var(--text-secondary);
        }

        .activity-detail-icon {
            width: 20px;
            text-align: center;
        }

        .activity-organizer {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding-top: var(--space-md);
            border-top: 1px solid var(--border-light);
        }

        .activity-organizer-avatar {
            width: 32px;
            height: 32px;
        }

        .activity-organizer-info {
            flex: 1;
        }

        .activity-organizer-name {
            font-size: var(--font-body-sm);
            font-weight: var(--weight-semibold);
            color: var(--text-primary);
        }

        .activity-organizer-dept {
            font-size: var(--font-body-xs);
            color: var(--text-tertiary);
        }

        .activity-participants {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .activity-participants-avatars {
            display: flex;
            margin-left: calc(var(--space-xs) * -1);
        }

        .activity-participants-avatars img {
            width: 24px;
            height: 24px;
            border: 2px solid white;
            margin-left: calc(var(--space-xs) * -1);
        }

        .activity-participants-count {
            font-size: var(--font-body-sm);
            color: var(--text-secondary);
            margin-left: var(--space-xs);
        }

        .create-activity-btn {
            position: fixed;
            bottom: 96px;
            right: var(--space-md);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            font-size: 24px;
            box-shadow: var(--shadow-lg);
            border: none;
            cursor: pointer;
            z-index: 100;
            transition: all var(--transition-base);
        }

        .create-activity-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }

        .create-activity-btn:active {
            transform: scale(0.95);
        }

        .empty-state {
            text-align: center;
            padding: var(--space-3xl) var(--space-lg);
        }

        .empty-state-emoji {
            font-size: 64px;
            margin-bottom: var(--space-md);
        }

        .empty-state-title {
            font-size: var(--font-h3);
            font-weight: var(--weight-semibold);
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .empty-state-description {
            font-size: var(--font-body);
            color: var(--text-secondary);
            margin-bottom: var(--space-lg);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: var(--font-h3);
            font-weight: var(--weight-semibold);
            margin-bottom: var(--space-md);
        }

        .modal-body {
            margin-bottom: var(--space-lg);
        }

        .modal-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .form-group {
            margin-bottom: var(--space-md);
        }

        .form-label {
            display: block;
            font-size: var(--font-body-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-xs);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: var(--font-body);
            font-family: 'Noto Sans TC', sans-serif;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .activity-type-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-sm);
        }

        .activity-type-option {
            padding: var(--space-md);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .activity-type-option:hover {
            border-color: var(--primary-blue);
            background: var(--bg-secondary);
        }

        .activity-type-option.selected {
            border-color: var(--primary-blue);
            background: var(--primary-light);
        }

        .activity-type-option-emoji {
            font-size: 32px;
            margin-bottom: var(--space-xs);
        }

        .activity-type-option-label {
            font-size: var(--font-body-sm);
            font-weight: var(--weight-semibold);
        }

        .participant-limit-input {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .participant-limit-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 1px solid var(--border-color);
            background: white;
            font-size: 20px;
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .participant-limit-btn:hover {
            border-color: var(--primary-blue);
            background: var(--primary-light);
        }

        .participant-limit-value {
            flex: 1;
            text-align: center;
            font-size: var(--font-h3);
            font-weight: var(--weight-semibold);
        }

        .activity-detail-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 2000;
            display: none;
            overflow-y: auto;
        }

        .activity-detail-page.show {
            display: block;
        }

        .activity-detail-hero {
            background: var(--gradient-primary);
            padding: var(--space-2xl) var(--space-md);
            color: white;
            text-align: center;
        }

        .activity-detail-emoji {
            font-size: 64px;
            margin-bottom: var(--space-md);
        }

        .activity-detail-title {
            font-size: var(--font-h2);
            font-weight: var(--weight-bold);
            margin-bottom: var(--space-sm);
        }

        .activity-detail-content {
            padding: var(--space-lg);
        }

        .activity-detail-section {
            margin-bottom: var(--space-lg);
        }

        .activity-detail-section-title {
            font-size: var(--font-body);
            font-weight: var(--weight-semibold);
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
        }

        .join-activity-btn {
            position: fixed;
            bottom: var(--space-md);
            left: var(--space-md);
            right: var(--space-md);
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="activity-list-page page-with-nav">
        <div class="top-nav">
            <div class="top-nav-left">
                <div class="top-nav-title">æ´»å‹•å»£å ´</div>
            </div>
            <div class="top-nav-right">
                <button class="btn-icon" onclick="Utils.showToast('æœå°‹åŠŸèƒ½é–‹ç™¼ä¸­', 'info')">
                    <span>ğŸ”</span>
                </button>
            </div>
        </div>

        <!-- Activity Header -->
        <div class="activity-header">
            <h1>æ¢ç´¢å°å¤§å‘¨é‚Šæ´»å‹•</h1>
            <div class="activity-stats">
                <div class="activity-stat-item">
                    <div class="activity-stat-number" id="activeActivities">12</div>
                    <div class="activity-stat-label">é€²è¡Œä¸­</div>
                </div>
                <div class="activity-stat-item">
                    <div class="activity-stat-number" id="myActivities">3</div>
                    <div class="activity-stat-label">æˆ‘åƒåŠ çš„</div>
                </div>
                <div class="activity-stat-item">
                    <div class="activity-stat-number" id="totalParticipants">48</div>
                    <div class="activity-stat-label">ç¸½åƒèˆ‡äººæ•¸</div>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <div class="filter-chip active" data-filter="all" onclick="filterActivities('all')">å…¨éƒ¨</div>
            <div class="filter-chip" data-filter="coffee" onclick="filterActivities('coffee')">â˜• å–å’–å•¡</div>
            <div class="filter-chip" data-filter="movie" onclick="filterActivities('movie')">ğŸ¬ çœ‹é›»å½±</div>
            <div class="filter-chip" data-filter="study" onclick="filterActivities('study')">ğŸ“š ä¸€èµ·è®€æ›¸</div>
            <div class="filter-chip" data-filter="food" onclick="filterActivities('food')">ğŸ½ï¸ åƒç¾é£Ÿ</div>
            <div class="filter-chip" data-filter="sport" onclick="filterActivities('sport')">âš½ é‹å‹•</div>
            <div class="filter-chip" data-filter="exhibition" onclick="filterActivities('exhibition')">ğŸ¨ çœ‹å±•è¦½</div>
            <div class="filter-chip" data-filter="game" onclick="filterActivities('game')">ğŸ® æ‰“éŠæˆ²</div>
            <div class="filter-chip" data-filter="walk" onclick="filterActivities('walk')">ğŸŒ³ æ•£æ­¥</div>
        </div>

        <!-- Activity List -->
        <div class="activity-list-container" id="activityList">
            <!-- Activities will be dynamically inserted here -->
        </div>

        <!-- Create Activity Button -->
        <button class="create-activity-btn" onclick="openCreateActivityModal()" title="ç™¼èµ·æ–°æ´»å‹•">
            +
        </button>

        <div class="bottom-nav">
            <div class="nav-item" onclick="window.location.href='swipe.html'">
                <div class="nav-icon">ğŸ´</div>
                <div>ç›²ç›’</div>
            </div>
            <div class="nav-item" onclick="window.location.href='chat-list.html'">
                <div class="nav-icon">ğŸ’¬</div>
                <div>èŠå¤©</div>
            </div>
            <div class="nav-item active" onclick="window.location.href='activity-list.html'">
                <div class="nav-icon">ğŸ‰</div>
                <div>æ´»å‹•</div>
            </div>
            <div class="nav-item" onclick="window.location.href='profile.html'">
                <div class="nav-icon">ğŸ‘¤</div>
                <div>æˆ‘çš„</div>
            </div>
        </div>
    </div>

    <!-- Create Activity Modal -->
    <div class="modal" id="createActivityModal">
        <div class="modal-content">
            <div class="modal-header">ç™¼èµ·æ–°æ´»å‹•</div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">æ´»å‹•é¡å‹</label>
                    <div class="activity-type-selector">
                        <div class="activity-type-option" data-type="coffee" data-emoji="â˜•" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">â˜•</div>
                            <div class="activity-type-option-label">å–å’–å•¡</div>
                        </div>
                        <div class="activity-type-option" data-type="movie" data-emoji="ğŸ¬" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">ğŸ¬</div>
                            <div class="activity-type-option-label">çœ‹é›»å½±</div>
                        </div>
                        <div class="activity-type-option" data-type="study" data-emoji="ğŸ“š" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">ğŸ“š</div>
                            <div class="activity-type-option-label">ä¸€èµ·è®€æ›¸</div>
                        </div>
                        <div class="activity-type-option" data-type="food" data-emoji="ğŸ½ï¸" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">ğŸ½ï¸</div>
                            <div class="activity-type-option-label">åƒç¾é£Ÿ</div>
                        </div>
                        <div class="activity-type-option" data-type="sport" data-emoji="âš½" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">âš½</div>
                            <div class="activity-type-option-label">é‹å‹•</div>
                        </div>
                        <div class="activity-type-option" data-type="exhibition" data-emoji="ğŸ¨" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">ğŸ¨</div>
                            <div class="activity-type-option-label">çœ‹å±•è¦½</div>
                        </div>
                        <div class="activity-type-option" data-type="game" data-emoji="ğŸ®" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">ğŸ®</div>
                            <div class="activity-type-option-label">æ‰“éŠæˆ²</div>
                        </div>
                        <div class="activity-type-option" data-type="walk" data-emoji="ğŸŒ³" onclick="selectActivityType(this)">
                            <div class="activity-type-option-emoji">ğŸŒ³</div>
                            <div class="activity-type-option-label">æ•£æ­¥</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">æ´»å‹•æ¨™é¡Œ</label>
                    <input type="text" class="form-input" id="activityTitle" placeholder="ä¾‹å¦‚: é€±äº”ä¸‹åˆä¸€èµ·å–å’–å•¡èŠå¤©">
                </div>

                <div class="form-group">
                    <label class="form-label">æ´»å‹•æ™‚é–“</label>
                    <input type="datetime-local" class="form-input" id="activityTime">
                </div>

                <div class="form-group">
                    <label class="form-label">æ´»å‹•åœ°é»</label>
                    <input type="text" class="form-input" id="activityLocation" placeholder="ä¾‹å¦‚: èˆŸå±±è·¯å’–å•¡å»³">
                </div>

                <div class="form-group">
                    <label class="form-label">äººæ•¸é™åˆ¶</label>
                    <div class="participant-limit-input">
                        <button class="participant-limit-btn" onclick="adjustParticipantLimit(-1)">-</button>
                        <div class="participant-limit-value" id="participantLimit">4</div>
                        <button class="participant-limit-btn" onclick="adjustParticipantLimit(1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">æ´»å‹•èªªæ˜ (é¸å¡«)</label>
                    <textarea class="form-textarea" id="activityDescription" placeholder="æè¿°æ´»å‹•çš„æ›´å¤šç´°ç¯€..."></textarea>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary flex-1" onclick="closeModal('createActivityModal')">å–æ¶ˆ</button>
                <button class="btn btn-primary flex-1" onclick="createActivity()">ç™¼èµ·æ´»å‹•</button>
            </div>
        </div>
    </div>

    <!-- Activity Detail Page -->
    <div class="activity-detail-page" id="activityDetailPage">
        <div class="top-nav">
            <div class="top-nav-left">
                <button class="btn-icon" onclick="closeActivityDetail()">
                    <span>â†</span>
                </button>
                <div class="top-nav-title">æ´»å‹•è©³æƒ…</div>
            </div>
            <div class="top-nav-right">
                <button class="btn-icon" onclick="Utils.showToast('åˆ†äº«åŠŸèƒ½é–‹ç™¼ä¸­', 'info')">
                    <span>ğŸ“¤</span>
                </button>
            </div>
        </div>

        <div class="activity-detail-hero">
            <div class="activity-detail-emoji" id="detailEmoji">â˜•</div>
            <div class="activity-detail-title" id="detailTitle">ä¸€èµ·å–å’–å•¡</div>
            <div class="activity-status recruiting" id="detailStatus">æ‹›å‹Ÿä¸­</div>
        </div>

        <div class="activity-detail-content">
            <div class="activity-detail-section">
                <div class="activity-detail-section-title">æ´»å‹•è³‡è¨Š</div>
                <div class="activity-details" id="detailInfo">
                    <!-- Will be filled dynamically -->
                </div>
            </div>

            <div class="activity-detail-section">
                <div class="activity-detail-section-title">æ´»å‹•èªªæ˜</div>
                <p id="detailDescription" style="color: var(--text-secondary); line-height: 1.6;">
                    <!-- Will be filled dynamically -->
                </p>
            </div>

            <div class="activity-detail-section">
                <div class="activity-detail-section-title">ä¸»è¾¦äºº</div>
                <div class="activity-organizer" id="detailOrganizer">
                    <!-- Will be filled dynamically -->
                </div>
            </div>

            <div class="activity-detail-section">
                <div class="activity-detail-section-title">åƒèˆ‡è€…</div>
                <div id="detailParticipants">
                    <!-- Will be filled dynamically -->
                </div>
            </div>
        </div>

        <button class="btn btn-primary btn-block join-activity-btn" id="joinBtn" onclick="joinActivity()">
            åƒåŠ æ´»å‹•
        </button>
    </div>

    <script src="../js/config.js"></script>
    <script src="../js/utils.js"></script>

    <script>
        // Fake activities data
        const FAKE_ACTIVITIES = [
            {
                id: 1,
                type: 'coffee',
                emoji: 'â˜•',
                title: 'é€±äº”ä¸‹åˆå–å’–å•¡èŠå¤©',
                time: 'ä»Šå¤© 15:00',
                location: 'èˆŸå±±è·¯å’–å•¡å»³',
                organizer: FAKE_USERS[0],
                participants: [FAKE_USERS[0], FAKE_USERS[1]],
                maxParticipants: 4,
                status: 'recruiting',
                description: 'æƒ³æ‰¾äººä¸€èµ·å–å’–å•¡èŠèŠå¤©,åˆ†äº«æœ€è¿‘çš„ç”Ÿæ´»å’Œå­¸ç¿’å¿ƒå¾—ã€‚æ­¡è¿å–œæ­¡å’–å•¡çš„æœ‹å‹ä¸€èµ·ä¾†!'
            },
            {
                id: 2,
                type: 'study',
                emoji: 'ğŸ“š',
                title: 'ç¸½åœ–å¤œè®€å°çµ„',
                time: 'ä»Šå¤© 19:00',
                location: 'ç¸½åœ–æ›¸é¤¨ 4F',
                organizer: FAKE_USERS[2],
                participants: [FAKE_USERS[2], FAKE_USERS[3], FAKE_USERS[4]],
                maxParticipants: 6,
                status: 'recruiting',
                description: 'æº–å‚™æœŸä¸­è€ƒ,æ‰¾å¹¾å€‹äººä¸€èµ·è®€æ›¸äº’ç›¸ç£ä¿ƒã€‚æœƒæº–å‚™ä¸€äº›å°é›¶é£Ÿ,è®€æ›¸æ°›åœå¾ˆå¥½!'
            },
            {
                id: 3,
                type: 'movie',
                emoji: 'ğŸ¬',
                title: 'é€±æœ«ä¸€èµ·çœ‹é›»å½±',
                time: 'æ˜å¤© 14:00',
                location: 'å¨ç§€å½±åŸ',
                organizer: FAKE_USERS[1],
                participants: [FAKE_USERS[1], FAKE_USERS[5]],
                maxParticipants: 4,
                status: 'recruiting',
                description: 'æœ€è¿‘æœ‰éƒ¨æ–°ç‰‡ä¸Šæ˜ ,æƒ³æ‰¾äººä¸€èµ·å»çœ‹ã€‚çœ‹å®Œå¯ä»¥ä¸€èµ·è¨è«–åŠ‡æƒ…!'
            },
            {
                id: 4,
                type: 'food',
                emoji: 'ğŸ½ï¸',
                title: 'å…¬é¤¨ç¾é£Ÿæ¢éšª',
                time: 'æ˜å¤© 12:00',
                location: 'å…¬é¤¨å•†åœˆ',
                organizer: FAKE_USERS[3],
                participants: [FAKE_USERS[3], FAKE_USERS[0], FAKE_USERS[2], FAKE_USERS[1]],
                maxParticipants: 4,
                status: 'full',
                description: 'ä¸€èµ·å»å…¬é¤¨åƒç¾é£Ÿ!æœ‰å¹¾å®¶æƒ³è©¦è©¦çš„é¤å»³,åƒè²¨æ­¡è¿åŠ å…¥~'
            },
            {
                id: 5,
                type: 'sport',
                emoji: 'âš½',
                title: 'é†‰æœˆæ¹–æ…¢è·‘',
                time: 'ä»Šå¤© 17:30',
                location: 'é†‰æœˆæ¹–',
                organizer: FAKE_USERS[4],
                participants: [FAKE_USERS[4], FAKE_USERS[5]],
                maxParticipants: 5,
                status: 'recruiting',
                description: 'ä¸‹èª²å¾Œä¸€èµ·å»é†‰æœˆæ¹–æ…¢è·‘,å¤§æ¦‚è·‘ 3-5 åœˆã€‚è·‘å®Œå¯ä»¥ä¸€èµ·åƒæ™šé¤!'
            },
            {
                id: 6,
                type: 'walk',
                emoji: 'ğŸŒ³',
                title: 'æ¤°æ—å¤§é“æ•£æ­¥',
                time: 'ä»Šå¤© 16:00',
                location: 'æ¤°æ—å¤§é“',
                organizer: FAKE_USERS[5],
                participants: [FAKE_USERS[5], FAKE_USERS[2], FAKE_USERS[3]],
                maxParticipants: 4,
                status: 'recruiting',
                description: 'å¤©æ°£å¾ˆå¥½,æƒ³æ‰¾äººä¸€èµ·åœ¨æ¤°æ—å¤§é“æ•£æ•£æ­¥èŠèŠå¤©ã€‚æœƒå¸¶ç›¸æ©Ÿ,å¯ä»¥å¹«å¤§å®¶æ‹ç…§!'
            }
        ];

        let currentFilter = 'all';
        let selectedActivityType = null;
        let participantLimit = 4;
        let currentActivityDetail = null;

        document.addEventListener('DOMContentLoaded', () => {
            renderActivities();
            animateEntrance();
        });

        function renderActivities() {
            const container = document.getElementById('activityList');
            const filtered = currentFilter === 'all'
                ? FAKE_ACTIVITIES
                : FAKE_ACTIVITIES.filter(a => a.type === currentFilter);

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-emoji">ğŸ‰</div>
                        <div class="empty-state-title">ç›®å‰æ²’æœ‰ç›¸é—œæ´»å‹•</div>
                        <div class="empty-state-description">
                            æˆç‚ºç¬¬ä¸€å€‹ç™¼èµ·æ´»å‹•çš„äººå§!
                        </div>
                        <button class="btn btn-primary" onclick="openCreateActivityModal()">
                            ç™¼èµ·æ–°æ´»å‹•
                        </button>
                    </div>
                `;
                return;
            }

            container.innerHTML = '';
            filtered.forEach((activity, index) => {
                const card = createActivityCard(activity);
                container.appendChild(card);

                // Entrance animation
                gsap.from(card, {
                    duration: 0.4,
                    y: 20,
                    opacity: 0,
                    delay: index * 0.1,
                    ease: 'power2.out'
                });
            });
        }

        function createActivityCard(activity) {
            const card = document.createElement('div');
            card.className = 'activity-card';
            card.onclick = () => openActivityDetail(activity);

            const statusText = activity.status === 'recruiting' ? 'æ‹›å‹Ÿä¸­' :
                              activity.status === 'full' ? 'å·²é¡æ»¿' : 'å·²çµæŸ';
            const statusClass = activity.status;

            // Get participant avatars (show up to 3)
            const participantAvatars = activity.participants.slice(0, 3).map(p =>
                `<img src="${p.avatar}" alt="${p.name}" class="avatar-xs">`
            ).join('');

            card.innerHTML = `
                <div class="activity-card-header">
                    <div class="activity-type">
                        <span class="activity-type-emoji">${activity.emoji}</span>
                        <span>${activity.title}</span>
                    </div>
                    <div class="activity-status ${statusClass}">${statusText}</div>
                </div>
                <div class="activity-details">
                    <div class="activity-detail-item">
                        <span class="activity-detail-icon">ğŸ“…</span>
                        <span>${activity.time}</span>
                    </div>
                    <div class="activity-detail-item">
                        <span class="activity-detail-icon">ğŸ“</span>
                        <span>${activity.location}</span>
                    </div>
                    <div class="activity-detail-item">
                        <span class="activity-detail-icon">ğŸ‘¥</span>
                        <span>${activity.participants.length} / ${activity.maxParticipants} äºº</span>
                    </div>
                </div>
                <div class="activity-organizer">
                    <img src="${activity.organizer.avatar}" alt="${activity.organizer.name}" class="avatar activity-organizer-avatar">
                    <div class="activity-organizer-info">
                        <div class="activity-organizer-name">${activity.organizer.name}</div>
                        <div class="activity-organizer-dept">${activity.organizer.department}</div>
                    </div>
                    ${activity.participants.length > 1 ? `
                        <div class="activity-participants">
                            <div class="activity-participants-avatars">
                                ${participantAvatars}
                            </div>
                            ${activity.participants.length > 3 ? `
                                <span class="activity-participants-count">+${activity.participants.length - 3}</span>
                            ` : ''}
                        </div>
                    ` : ''}
                </div>
            `;

            return card;
        }

        function filterActivities(filter) {
            currentFilter = filter;

            // Update filter chips
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
                if (chip.dataset.filter === filter) {
                    chip.classList.add('active');
                }
            });

            renderActivities();
        }

        function openCreateActivityModal() {
            document.getElementById('createActivityModal').classList.add('show');
            animateModal('createActivityModal');
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            gsap.to(modal.querySelector('.modal-content'), {
                duration: 0.2,
                scale: 0.9,
                opacity: 0,
                onComplete: () => {
                    modal.classList.remove('show');
                }
            });
        }

        function animateModal(modalId) {
            const content = document.getElementById(modalId).querySelector('.modal-content');
            gsap.from(content, {
                duration: 0.3,
                scale: 0.9,
                opacity: 0,
                ease: 'back.out(1.7)'
            });
        }

        function selectActivityType(element) {
            document.querySelectorAll('.activity-type-option').forEach(opt =>
                opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedActivityType = {
                type: element.dataset.type,
                emoji: element.dataset.emoji
            };
        }

        function adjustParticipantLimit(delta) {
            participantLimit = Math.max(2, Math.min(20, participantLimit + delta));
            document.getElementById('participantLimit').textContent = participantLimit;

            gsap.to('#participantLimit', {
                duration: 0.2,
                scale: 1.2,
                yoyo: true,
                repeat: 1,
                ease: 'power2.inOut'
            });
        }

        function createActivity() {
            if (!selectedActivityType) {
                Utils.showToast('è«‹é¸æ“‡æ´»å‹•é¡å‹', 'error');
                return;
            }

            const title = document.getElementById('activityTitle').value.trim();
            const time = document.getElementById('activityTime').value;
            const location = document.getElementById('activityLocation').value.trim();
            const description = document.getElementById('activityDescription').value.trim();

            if (!title || !time || !location) {
                Utils.showToast('è«‹å¡«å¯«å¿…å¡«æ¬„ä½', 'error');
                return;
            }

            Utils.showLoading('ç™¼èµ·æ´»å‹•ä¸­...');
            setTimeout(() => {
                Utils.hideLoading();
                closeModal('createActivityModal');
                Utils.showToast('æ´»å‹•ç™¼èµ·æˆåŠŸ!', 'success');

                // Reset form
                document.getElementById('activityTitle').value = '';
                document.getElementById('activityTime').value = '';
                document.getElementById('activityLocation').value = '';
                document.getElementById('activityDescription').value = '';
                document.querySelectorAll('.activity-type-option').forEach(opt =>
                    opt.classList.remove('selected'));
                selectedActivityType = null;
                participantLimit = 4;
                document.getElementById('participantLimit').textContent = 4;
            }, 1500);
        }

        function openActivityDetail(activity) {
            currentActivityDetail = activity;

            document.getElementById('detailEmoji').textContent = activity.emoji;
            document.getElementById('detailTitle').textContent = activity.title;

            const statusText = activity.status === 'recruiting' ? 'æ‹›å‹Ÿä¸­' :
                              activity.status === 'full' ? 'å·²é¡æ»¿' : 'å·²çµæŸ';
            const statusClass = activity.status;
            const statusElement = document.getElementById('detailStatus');
            statusElement.textContent = statusText;
            statusElement.className = `activity-status ${statusClass}`;

            document.getElementById('detailInfo').innerHTML = `
                <div class="activity-detail-item">
                    <span class="activity-detail-icon">ğŸ“…</span>
                    <span>${activity.time}</span>
                </div>
                <div class="activity-detail-item">
                    <span class="activity-detail-icon">ğŸ“</span>
                    <span>${activity.location}</span>
                </div>
                <div class="activity-detail-item">
                    <span class="activity-detail-icon">ğŸ‘¥</span>
                    <span>${activity.participants.length} / ${activity.maxParticipants} äºº</span>
                </div>
            `;

            document.getElementById('detailDescription').textContent =
                activity.description || 'ä¸»è¾¦äººæ²’æœ‰ç•™ä¸‹èªªæ˜';

            document.getElementById('detailOrganizer').innerHTML = `
                <img src="${activity.organizer.avatar}" alt="${activity.organizer.name}" class="avatar">
                <div class="activity-organizer-info" style="flex: 1;">
                    <div class="activity-organizer-name">${activity.organizer.name}, ${activity.organizer.age}</div>
                    <div class="activity-organizer-dept">${activity.organizer.department}</div>
                </div>
            `;

            const participantsHtml = activity.participants.map(p => `
                <div class="activity-organizer" style="border: none; padding: var(--space-sm) 0;">
                    <img src="${p.avatar}" alt="${p.name}" class="avatar">
                    <div class="activity-organizer-info">
                        <div class="activity-organizer-name">${p.name}, ${p.age}</div>
                        <div class="activity-organizer-dept">${p.department}</div>
                    </div>
                </div>
            `).join('');
            document.getElementById('detailParticipants').innerHTML = participantsHtml;

            // Update join button
            const joinBtn = document.getElementById('joinBtn');
            if (activity.status === 'full') {
                joinBtn.textContent = 'æ´»å‹•å·²é¡æ»¿';
                joinBtn.disabled = true;
                joinBtn.style.opacity = '0.5';
            } else if (activity.status === 'closed') {
                joinBtn.textContent = 'æ´»å‹•å·²çµæŸ';
                joinBtn.disabled = true;
                joinBtn.style.opacity = '0.5';
            } else {
                joinBtn.textContent = 'åƒåŠ æ´»å‹•';
                joinBtn.disabled = false;
                joinBtn.style.opacity = '1';
            }

            document.getElementById('activityDetailPage').classList.add('show');

            // Entrance animation
            gsap.from('#activityDetailPage .activity-detail-hero', {
                duration: 0.5,
                y: -30,
                opacity: 0,
                ease: 'power2.out'
            });

            gsap.from('#activityDetailPage .activity-detail-section', {
                duration: 0.4,
                y: 20,
                opacity: 0,
                stagger: 0.1,
                delay: 0.2,
                ease: 'power2.out'
            });
        }

        function closeActivityDetail() {
            document.getElementById('activityDetailPage').classList.remove('show');
        }

        function joinActivity() {
            if (!currentActivityDetail) return;

            Utils.showConfirm(
                `ç¢ºå®šè¦åƒåŠ ã€Œ${currentActivityDetail.title}ã€å—?`,
                () => {
                    Utils.showLoading('åŠ å…¥ä¸­...');
                    setTimeout(() => {
                        Utils.hideLoading();
                        Utils.showToast('å·²æˆåŠŸåƒåŠ æ´»å‹•!', 'success');
                        closeActivityDetail();
                    }, 1000);
                }
            );
        }

        function animateEntrance() {
            gsap.from('.activity-header', {
                duration: 0.6,
                y: -30,
                opacity: 0,
                ease: 'power2.out'
            });

            gsap.from('.filter-section', {
                duration: 0.5,
                y: 20,
                opacity: 0,
                delay: 0.2,
                ease: 'power2.out'
            });
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal.id);
                }
            });
        });
    </script>
</body>
</html>
